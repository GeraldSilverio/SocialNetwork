@using SocialNewtwork.Core.Application.Helpers;
@using SocialNewtwork.Core.Application.ViewModels.PostsViewModels;
@using SocialNewtwork.Core.Application.ViewModels.UsersViewModels;
@using SocialNewtwork.Core.Application.Dtos.Account;
@model SavePostViewModel
@inject IHttpContextAccessor httpContextAccessor
@{
    var User = httpContextAccessor.HttpContext.Session.Get<AuthenticationReponse>("user");

}

@{
    ViewData["Title"] = "Publicaciones";
}

@if (User != null)
{
    <div class="container">


        <div class="col-6 offset-3">


            <div class="justify-content-start">
                <form method="post" asp-controller="Home" asp-action="Index" enctype="multipart/form-data">
                    <div class="input-group mb-3">
                        <input class="bg-black form-control form-control-sm text-white" asp-for="Content" style="border-radius:100px;" type="text" placeholder="En que piensas hoy?">
                        <input type="hidden" asp-for="IdUser" value="@User.Id">
                        <button type="submit" class="btn btn-primary ms-1" style="border-radius:80px;"> Twittear</button>
                    </div>

                    <div class="mb-2">

                        <input class="form-control form-control-sm " asp-for="File" required />

                    </div>
                </form>
            </div>

            @foreach (EditPostViewModel item in ViewBag.Posts)
            {
                <div class="card text-center text-white mb-3" style="background-color: black; border: 1px solid gray; border-top-right-radius:50px; border-top-left-radius:50px;">

                    <div class="card-header" style="border: 1px solid gray; border-top-right-radius:50px; border-top-left-radius:50px;">
                        <div class="d-flex justify-content-start align-items-start">

                            <img class="rounded-circle" src="@User.Image" style="width: 50px; height:40px; " />

                            <div class="text-center">
                                <p class="ms-2"> <strong> @User.UserName </strong> </p>
                            </div>

                            <div class="d-flex justify-content-end">
                                <p style="margin-left:120px;">@item.DateOfCreated</p>

                                <a class="btn btn-danger bg-transparent d-flex justify-content-end " asp-controller="Home" asp-action="Delete" style="border:none; ">
                                    <i class="fa-solid fa-trash " style="color: red;"></i>
                                </a>

                                <a class="btn btn-danger bg-transparent d-flex justify-content-end " asp-controller="Home" asp-action="Delete" style="border:none;">
                                    <i class="fa-solid fa-square-pen" style="color: #f5ed00;"></i>
                                </a>
                            </div>
                        </div>
                    </div>

                    <div class="card-body" style="border: 1px solid gray;">

                        <p class="card-title text-start">@item.Content</p>
                        <hr>

                        <img style="width: 500px; height:400px; border-radius:10px;" src="@item.Image" />

                    </div>


                    <div class="card-footer text-body-secondary" style="border: 1px solid gray;">
                        <div class="card bg-black">
                            <div class="d-flex justify-content-start">
                                <img class="rounded-circle" src="@User.Image" style="width: 50px; height:40px;" />
                                <p class="ms-2"> <strong> @User.Name @User.LastName</strong> </p>
                            </div>
                            <div class="d-flex justify-content-start">
                                <p class="text-start">@item.Content</p>

                            </div>
                            <hr style="color:#DCDCDC">

                        </div>

                        <div class="justify-content-start">
                            <form>
                                <div class="input-group mb-3">
                                    <input class="bg-black form-control form-control-sm text-white" style="width: 80%; border-radius:100px;" type="text" placeholder="Postea tu respuesta">
                                    <a class="btn btn-primary ms-1" style="border-radius:80px;"> Comentar</a>
                                </div>
                            </form>
                        </div>

                    </div>
                </div>
            }


        </div>
    </div>


}
<script src="https://kit.fontawesome.com/47ea8ef61d.js" crossorigin="anonymous"></script>




